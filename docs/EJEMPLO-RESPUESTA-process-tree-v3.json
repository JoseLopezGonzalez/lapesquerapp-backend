{
  "message": "Árbol de procesos obtenido correctamente.",
  "data": {
    "processNodes": [
      {
        "id": 1,
        "productionId": 1,
        "production": {
          "id": 1,
          "lot": "LOT-2024-001",
          "openedAt": "2024-01-15T10:30:00Z",
          "closedAt": null
        },
        "parentRecordId": null,
        "parent": null,
        "processId": 3,
        "process": {
          "id": 3,
          "name": "Eviscerado",
          "type": "processing"
        },
        "startedAt": "2024-01-15T10:35:00Z",
        "finishedAt": "2024-01-15T12:00:00Z",
        "notes": "Proceso de eviscerado manual",
        "isRoot": true,
        "isFinal": false,
        "isCompleted": true,
        "totalInputWeight": 150.50,
        "totalOutputWeight": 120.30,
        "totalInputBoxes": 5,
        "totalOutputBoxes": 8,
        "waste": 30.20,
        "wastePercentage": 20.07,
        "yield": 0,
        "yieldPercentage": 0,
        "inputs": [
          {
            "id": 1,
            "type": "stock_box",
            "productionRecordId": 1,
            "boxId": 123,
            "box": {
              "id": 123,
              "lot": "LOT-2024-001",
              "netWeight": 25.5,
              "grossWeight": 26.0,
              "product": {
                "id": 10,
                "name": "Atún entero"
              }
            },
            "product": {
              "id": 10,
              "name": "Atún entero"
            },
            "lot": "LOT-2024-001",
            "weight": 25.5,
            "createdAt": "2024-01-15T11:05:00Z",
            "updatedAt": "2024-01-15T11:05:00Z"
          }
        ],
        "parentOutputConsumptions": [],
        "outputs": [
          {
            "id": 1,
            "productionRecordId": 1,
            "productId": 11,
            "product": {
              "id": 11,
              "name": "Atún eviscerado"
            },
            "lotId": "LOT-2024-001-EV",
            "boxes": 10,
            "weightKg": 245.5,
            "averageWeightPerBox": 24.55,
            "createdAt": "2024-01-15T11:10:00Z",
            "updatedAt": "2024-01-15T11:10:00Z"
          }
        ],
        "children": [
          {
            "id": 2,
            "productionId": 1,
            "production": {
              "id": 1,
              "lot": "LOT-2024-001",
              "openedAt": "2024-01-15T10:30:00Z",
              "closedAt": null
            },
            "parentRecordId": 1,
            "parent": {
              "id": 1,
              "process": {
                "id": 3,
                "name": "Eviscerado"
              }
            },
            "processId": 4,
            "process": {
              "id": 4,
              "name": "Fileteado Final",
              "type": "processing"
            },
            "startedAt": "2024-01-15T12:05:00Z",
            "finishedAt": "2024-01-15T14:00:00Z",
            "notes": null,
            "isRoot": false,
            "isFinal": true,
            "isCompleted": true,
            "totalInputWeight": 100.0,
            "totalOutputWeight": 190.0,
            "totalInputBoxes": 4,
            "totalOutputBoxes": 15,
            "waste": 0,
            "wastePercentage": 0,
            "yield": 90.0,
            "yieldPercentage": 90.0,
            "inputs": [],
            "parentOutputConsumptions": [
              {
                "id": 1,
                "type": "parent_output",
                "productionRecordId": 2,
                "productionOutputId": 1,
                "productionOutput": {
                  "id": 1,
                  "productId": 11,
                  "product": {
                    "id": 11,
                    "name": "Atún eviscerado"
                  },
                  "weightKg": 245.5,
                  "boxes": 10
                },
                "consumedWeightKg": 100.0,
                "consumedBoxes": 4,
                "weight": 100.0,
                "notes": "Consumo parcial del output del padre",
                "createdAt": "2024-01-15T12:10:00Z",
                "updatedAt": "2024-01-15T12:10:00Z"
              }
            ],
            "outputs": [
              {
                "id": 2,
                "productionRecordId": 2,
                "productId": 5,
                "product": {
                  "id": 5,
                  "name": "Filetes de Atún"
                },
                "lotId": "LOT-2024-001-FL",
                "boxes": 10,
                "weightKg": 95.0,
                "averageWeightPerBox": 9.5,
                "createdAt": "2024-01-15T14:05:00Z",
                "updatedAt": "2024-01-15T14:05:00Z"
              },
              {
                "id": 3,
                "productionRecordId": 2,
                "productId": 6,
                "product": {
                  "id": 6,
                  "name": "Atún en Aceite"
                },
                "lotId": "LOT-2024-001-AO",
                "boxes": 5,
                "weightKg": 95.0,
                "averageWeightPerBox": 19.0,
                "createdAt": "2024-01-15T14:05:00Z",
                "updatedAt": "2024-01-15T14:05:00Z"
              }
            ],
            "totals": {
              "inputWeight": 100.0,
              "outputWeight": 190.0,
              "inputBoxes": 4,
              "outputBoxes": 15,
              "waste": 0,
              "wastePercentage": 0,
              "yield": 90.0,
              "yieldPercentage": 90.0
            },
            "createdAt": "2024-01-15T12:05:00Z",
            "updatedAt": "2024-01-15T14:00:00Z",
            "children": [
              {
                "type": "sales",
                "id": "sales-2",
                "parentRecordId": 2,
                "productionId": 1,
                "orders": [
                  {
                    "order": {
                      "id": 123,
                      "formattedId": "#00123",
                      "customer": {
                        "id": 45,
                        "name": "Supermercado Central"
                      },
                      "loadDate": "2024-02-15T00:00:00Z",
                      "status": "pending"
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 789,
                            "availableBoxesCount": 10,
                            "totalAvailableWeight": 95.0
                          }
                        ],
                        "totalBoxes": 10,
                        "totalNetWeight": 95.0
                      },
                      {
                        "product": {
                          "id": 6,
                          "name": "Atún en Aceite"
                        },
                        "pallets": [
                          {
                            "id": 790,
                            "availableBoxesCount": 5,
                            "totalAvailableWeight": 47.5
                          }
                        ],
                        "totalBoxes": 5,
                        "totalNetWeight": 47.5
                      }
                    ],
                    "totalBoxes": 15,
                    "totalNetWeight": 142.5
                  },
                  {
                    "order": {
                      "id": 124,
                      "formattedId": "#00124",
                      "customer": {
                        "id": 46,
                        "name": "Pescadería Marina"
                      },
                      "loadDate": "2024-02-20T00:00:00Z",
                      "status": "pending"
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 791,
                            "availableBoxesCount": 8,
                            "totalAvailableWeight": 76.0
                          }
                        ],
                        "totalBoxes": 8,
                        "totalNetWeight": 76.0
                      }
                    ],
                    "totalBoxes": 8,
                    "totalNetWeight": 76.0
                  }
                ],
                "totalBoxes": 23,
                "totalNetWeight": 218.5,
                "summary": {
                  "ordersCount": 2,
                  "productsCount": 2,
                  "palletsCount": 3,
                  "boxesCount": 23,
                  "netWeight": 218.5
                },
                "children": []
              },
              {
                "type": "stock",
                "id": "stock-2",
                "parentRecordId": 2,
                "productionId": 1,
                "stores": [
                  {
                    "store": {
                      "id": 3,
                      "name": "Almacén Central",
                      "temperature": -18.0
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 456,
                            "availableBoxesCount": 15,
                            "totalAvailableWeight": 142.5,
                            "position": "A-12"
                          },
                          {
                            "id": 457,
                            "availableBoxesCount": 12,
                            "totalAvailableWeight": 114.0,
                            "position": "A-13"
                          }
                        ],
                        "totalBoxes": 27,
                        "totalNetWeight": 256.5
                      },
                      {
                        "product": {
                          "id": 6,
                          "name": "Atún en Aceite"
                        },
                        "pallets": [
                          {
                            "id": 458,
                            "availableBoxesCount": 8,
                            "totalAvailableWeight": 152.0,
                            "position": "B-05"
                          }
                        ],
                        "totalBoxes": 8,
                        "totalNetWeight": 152.0
                      }
                    ],
                    "totalBoxes": 35,
                    "totalNetWeight": 408.5
                  },
                  {
                    "store": {
                      "id": 4,
                      "name": "Almacén Norte",
                      "temperature": -20.0
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 459,
                            "availableBoxesCount": 5,
                            "totalAvailableWeight": 47.5,
                            "position": "C-08"
                          }
                        ],
                        "totalBoxes": 5,
                        "totalNetWeight": 47.5
                      }
                    ],
                    "totalBoxes": 5,
                    "totalNetWeight": 47.5
                  }
                ],
                "totalBoxes": 40,
                "totalNetWeight": 456.0,
                "summary": {
                  "storesCount": 2,
                  "productsCount": 2,
                  "palletsCount": 4,
                  "boxesCount": 40,
                  "netWeight": 456.0
                },
                "children": []
              }
            ]
          }
        ],
        "totals": {
          "inputWeight": 150.50,
          "outputWeight": 120.30,
          "inputBoxes": 5,
          "outputBoxes": 8,
          "waste": 30.20,
          "wastePercentage": 20.07,
          "yield": 0,
          "yieldPercentage": 0
        },
        "createdAt": "2024-01-15T10:35:00Z",
        "updatedAt": "2024-01-15T12:00:00Z"
      }
    ],
    "totals": {
      "totalInputWeight": 150.50,
      "totalOutputWeight": 215.30,
      "totalWaste": 0,
      "totalWastePercentage": 0,
      "totalYield": 64.80,
      "totalYieldPercentage": 43.06,
      "totalInputBoxes": 5,
      "totalOutputBoxes": 18,
      "totalSalesWeight": 218.5,
      "totalSalesBoxes": 23,
      "totalSalesPallets": 3,
      "totalStockWeight": 456.0,
      "totalStockBoxes": 40,
      "totalStockPallets": 4
    }
  }
}

