{
  "message": "Árbol de procesos obtenido correctamente.",
  "data": {
    "processNodes": [
      {
        "id": 1,
        "productionId": 1,
        "production": {
          "id": 1,
          "lot": "LOT-2024-001",
          "openedAt": "2024-01-15T10:30:00Z",
          "closedAt": null
        },
        "parentRecordId": null,
        "parent": null,
        "processId": 3,
        "process": {
          "id": 3,
          "name": "Eviscerado",
          "type": "processing"
        },
        "startedAt": "2024-01-15T10:35:00Z",
        "finishedAt": "2024-01-15T12:00:00Z",
        "notes": "Proceso de eviscerado manual",
        "isRoot": true,
        "isFinal": false,
        "isCompleted": true,
        "totalInputWeight": 150.50,
        "totalOutputWeight": 120.30,
        "totalInputBoxes": 5,
        "totalOutputBoxes": 8,
        "waste": 30.20,
        "wastePercentage": 20.07,
        "yield": 0,
        "yieldPercentage": 0,
        "inputs": [],
        "parentOutputConsumptions": [],
        "outputs": [
          {
            "id": 1,
            "productionRecordId": 1,
            "productId": 11,
            "product": {
              "id": 11,
              "name": "Atún eviscerado"
            },
            "lotId": "LOT-2024-001-EV",
            "boxes": 10,
            "weightKg": 245.5,
            "averageWeightPerBox": 24.55,
            "createdAt": "2024-01-15T11:10:00Z",
            "updatedAt": "2024-01-15T11:10:00Z"
          }
        ],
        "children": [
          {
            "id": 2,
            "productionId": 1,
            "production": {
              "id": 1,
              "lot": "LOT-2024-001",
              "openedAt": "2024-01-15T10:30:00Z",
              "closedAt": null
            },
            "parentRecordId": 1,
            "parent": {
              "id": 1,
              "process": {
                "id": 3,
                "name": "Eviscerado"
              }
            },
            "processId": 4,
            "process": {
              "id": 4,
              "name": "Fileteado",
              "type": "processing"
            },
            "startedAt": "2024-01-15T12:10:00Z",
            "finishedAt": "2024-01-15T14:30:00Z",
            "notes": null,
            "isRoot": false,
            "isFinal": true,
            "isCompleted": true,
            "totalInputWeight": 120.30,
            "totalOutputWeight": 100.00,
            "totalInputBoxes": 8,
            "totalOutputBoxes": 15,
            "waste": 20.30,
            "wastePercentage": 16.87,
            "yield": 0,
            "yieldPercentage": 0,
            "inputs": [],
            "parentOutputConsumptions": [
              {
                "id": 1,
                "productionRecordId": 2,
                "productionOutputId": 1,
                "productionOutput": {
                  "id": 1,
                  "productId": 11,
                  "product": {
                    "id": 11,
                    "name": "Atún eviscerado"
                  },
                  "weightKg": 245.5,
                  "boxes": 10
                },
                "consumedWeightKg": 120.30,
                "consumedBoxes": 8,
                "notes": null,
                "createdAt": "2024-01-15T12:15:00Z",
                "updatedAt": "2024-01-15T12:15:00Z"
              }
            ],
            "outputs": [
              {
                "id": 2,
                "productionRecordId": 2,
                "productId": 5,
                "product": {
                  "id": 5,
                  "name": "Filetes de Atún"
                },
                "lotId": "LOT-2024-001",
                "boxes": 10,
                "weightKg": 50.00,
                "averageWeightPerBox": 5.00,
                "createdAt": "2024-01-15T14:35:00Z",
                "updatedAt": "2024-01-15T14:35:00Z"
              },
              {
                "id": 3,
                "productionRecordId": 2,
                "productId": 6,
                "product": {
                  "id": 6,
                  "name": "Atún en Aceite"
                },
                "lotId": "LOT-2024-001",
                "boxes": 5,
                "weightKg": 50.00,
                "averageWeightPerBox": 10.00,
                "createdAt": "2024-01-15T14:35:00Z",
                "updatedAt": "2024-01-15T14:35:00Z"
              }
            ],
            "children": [
              {
                "type": "sales",
                "id": "sales-2",
                "parentRecordId": 2,
                "productionId": 1,
                "orders": [
                  {
                    "order": {
                      "id": 123,
                      "formattedId": "#00123",
                      "customer": {
                        "id": 45,
                        "name": "Supermercado Central"
                      },
                      "loadDate": "2024-02-15T00:00:00Z",
                      "status": "pending"
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 789,
                            "availableBoxesCount": 5,
                            "totalAvailableWeight": 25.0
                          }
                        ],
                        "totalBoxes": 5,
                        "totalNetWeight": 25.0
                      },
                      {
                        "product": {
                          "id": 6,
                          "name": "Atún en Aceite"
                        },
                        "pallets": [
                          {
                            "id": 790,
                            "availableBoxesCount": 3,
                            "totalAvailableWeight": 30.0
                          }
                        ],
                        "totalBoxes": 3,
                        "totalNetWeight": 30.0
                      }
                    ],
                    "totalBoxes": 8,
                    "totalNetWeight": 55.0
                  },
                  {
                    "order": {
                      "id": 124,
                      "formattedId": "#00124",
                      "customer": {
                        "id": 46,
                        "name": "Pescadería Marina"
                      },
                      "loadDate": "2024-02-20T00:00:00Z",
                      "status": "pending"
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 791,
                            "availableBoxesCount": 3,
                            "totalAvailableWeight": 15.0
                          }
                        ],
                        "totalBoxes": 3,
                        "totalNetWeight": 15.0
                      }
                    ],
                    "totalBoxes": 3,
                    "totalNetWeight": 15.0
                  }
                ],
                "totalBoxes": 11,
                "totalNetWeight": 70.0,
                "summary": {
                  "ordersCount": 2,
                  "productsCount": 2,
                  "palletsCount": 3,
                  "boxesCount": 11,
                  "netWeight": 70.0
                },
                "children": []
              },
              {
                "type": "stock",
                "id": "stock-2",
                "parentRecordId": 2,
                "productionId": 1,
                "stores": [
                  {
                    "store": {
                      "id": 3,
                      "name": "Almacén Central",
                      "temperature": -18.0
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "pallets": [
                          {
                            "id": 456,
                            "availableBoxesCount": 1,
                            "totalAvailableWeight": 5.0,
                            "position": "A-12"
                          }
                        ],
                        "totalBoxes": 1,
                        "totalNetWeight": 5.0
                      }
                    ],
                    "totalBoxes": 1,
                    "totalNetWeight": 5.0
                  }
                ],
                "totalBoxes": 1,
                "totalNetWeight": 5.0,
                "summary": {
                  "storesCount": 1,
                  "productsCount": 1,
                  "palletsCount": 1,
                  "boxesCount": 1,
                  "netWeight": 5.0
                },
                "children": []
              },
              {
                "type": "reprocessed",
                "id": "reprocessed-2",
                "parentRecordId": 2,
                "productionId": 1,
                "processes": [
                  {
                    "process": {
                      "id": 8,
                      "name": "Enlatado",
                      "type": "processing"
                    },
                    "productionRecord": {
                      "id": 15,
                      "productionId": 2,
                      "startedAt": "2024-02-10T08:00:00Z",
                      "finishedAt": "2024-02-10T12:00:00Z"
                    },
                    "products": [
                      {
                        "product": {
                          "id": 5,
                          "name": "Filetes de Atún"
                        },
                        "boxes": [
                          {
                            "id": 1234,
                            "netWeight": 5.0,
                            "gs1_128": "1234567890123"
                          },
                          {
                            "id": 1235,
                            "netWeight": 5.0,
                            "gs1_128": "1234567890124"
                          }
                        ],
                        "totalBoxes": 2,
                        "totalNetWeight": 10.0
                      }
                    ],
                    "totalBoxes": 2,
                    "totalNetWeight": 10.0
                  }
                ],
                "totalBoxes": 2,
                "totalNetWeight": 10.0,
                "summary": {
                  "processesCount": 1,
                  "productsCount": 1,
                  "boxesCount": 2,
                  "netWeight": 10.0
                },
                "children": []
              },
              {
                "type": "missing",
                "id": "missing-2",
                "parentRecordId": 2,
                "productionId": 1,
                "products": [
                  {
                    "product": {
                      "id": 5,
                      "name": "Filetes de Atún"
                    },
                    "produced": {
                      "boxes": 10,
                      "weight": 50.0
                    },
                    "inSales": {
                      "boxes": 8,
                      "weight": 40.0
                    },
                    "inStock": {
                      "boxes": 1,
                      "weight": 5.0
                    },
                    "reprocessed": {
                      "boxes": 2,
                      "weight": 10.0
                    },
                    "missing": {
                      "boxes": 0,
                      "weight": 0.0,
                      "percentage": 0.0
                    },
                    "boxes": []
                  },
                  {
                    "product": {
                      "id": 6,
                      "name": "Atún en Aceite"
                    },
                    "produced": {
                      "boxes": 5,
                      "weight": 50.0
                    },
                    "inSales": {
                      "boxes": 3,
                      "weight": 30.0
                    },
                    "inStock": {
                      "boxes": 0,
                      "weight": 0.0
                    },
                    "reprocessed": {
                      "boxes": 0,
                      "weight": 0.0
                    },
                    "missing": {
                      "boxes": 2,
                      "weight": 20.0,
                      "percentage": 40.0
                    },
                    "boxes": [
                      {
                        "id": 5678,
                        "netWeight": 10.0,
                        "gs1_128": "9876543210987",
                        "location": null
                      },
                      {
                        "id": 5679,
                        "netWeight": 10.0,
                        "gs1_128": "9876543210988",
                        "location": null
                      }
                    ]
                  }
                ],
                "summary": {
                  "productsCount": 2,
                  "totalMissingBoxes": 2,
                  "totalMissingWeight": 20.0
                },
                "children": []
              }
            ]
          }
        ]
      }
    ],
    "totals": {
      "totalInputWeight": 150.50,
      "totalOutputWeight": 100.00,
      "totalWaste": 50.50,
      "totalWastePercentage": 33.55,
      "totalYield": 0,
      "totalYieldPercentage": 0,
      "totalInputBoxes": 5,
      "totalOutputBoxes": 15,
      "totalSalesWeight": 70.0,
      "totalSalesBoxes": 11,
      "totalSalesPallets": 3,
      "totalStockWeight": 5.0,
      "totalStockBoxes": 1,
      "totalStockPallets": 1
    }
  }
}

